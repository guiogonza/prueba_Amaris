{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Form,Button,Container,Alert}from'react-bootstrap';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SuscriptionForm=()=>{const[clientId,setClientId]=useState('');const[fundId,setFundId]=useState('');const[amount,setAmount]=useState('');const[clients,setClients]=useState([]);const[funds,setFunds]=useState([]);const[clientExists,setClientExists]=useState(true);const[message,setMessage]=useState('');useEffect(()=>{const fetchClients=async()=>{try{const response=await axios.get('http://localhost:5000/clients');setClients(response.data);}catch(error){console.error('Error fetching clients:',error);}};const fetchFunds=async()=>{try{const response=await axios.get('http://localhost:5000/funds');setFunds(response.data);}catch(error){console.error('Error fetching funds:',error);}};fetchClients();fetchFunds();},[]);const subscribe=async()=>{try{const response=await axios.post('http://localhost:5000/subscribe',{client_id:clientId,fund_id:fundId,amount});alert(\"Suscripci\\xF3n exitosa: \".concat(response.data.transaction_id));setMessage('');// Limpiar los campos del formulario\nsetClientId('');setFundId('');setAmount('');}catch(error){if(error.response.status===400){setMessage(error.response.data.message);setClientExists(false);}else{alert(error.response.data.message);}}};const handleAmountChange=e=>{const value=e.target.value;// Solo permitir números\nif(/^\\d*$/.test(value)){setAmount(value);}};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Suscribirse a un Fondo\"}),message&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:message}),/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Cliente\"}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",value:clientId,onChange:e=>setClientId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccione un cliente\"}),clients.map(client=>/*#__PURE__*/_jsx(\"option\",{value:client.ClienteId,children:client.Name},client.ClienteId))]})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Fondo\"}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",value:fundId,onChange:e=>setFundId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccione un fondo\"}),funds.map(fund=>/*#__PURE__*/_jsxs(\"option\",{value:fund.Id,children:[fund.Nombre,\" - Monto M\\xEDnimo: \",fund.MontoMinimo]},fund.Id))]})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Amount\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:amount,onChange:handleAmountChange})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:subscribe,children:\"Suscribirse\"})]})]});};export default SuscriptionForm;","map":{"version":3,"names":["React","useState","useEffect","axios","Form","Button","Container","Alert","jsx","_jsx","jsxs","_jsxs","SuscriptionForm","clientId","setClientId","fundId","setFundId","amount","setAmount","clients","setClients","funds","setFunds","clientExists","setClientExists","message","setMessage","fetchClients","response","get","data","error","console","fetchFunds","subscribe","post","client_id","fund_id","alert","concat","transaction_id","status","handleAmountChange","e","value","target","test","children","variant","Group","Label","Control","as","onChange","map","client","ClienteId","Name","fund","Id","Nombre","MontoMinimo","type","onClick"],"sources":["C:/Users/guiog/Documents/amaris/fund_app/frontend/src/components/SuscriptionForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Form, Button, Container, Alert } from 'react-bootstrap';\r\n\r\nconst SuscriptionForm = () => {\r\n  const [clientId, setClientId] = useState('');\r\n  const [fundId, setFundId] = useState('');\r\n  const [amount, setAmount] = useState('');\r\n  const [clients, setClients] = useState([]);\r\n  const [funds, setFunds] = useState([]);\r\n  const [clientExists, setClientExists] = useState(true);\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchClients = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:5000/clients');\r\n        setClients(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching clients:', error);\r\n      }\r\n    };\r\n\r\n    const fetchFunds = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:5000/funds');\r\n        setFunds(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching funds:', error);\r\n      }\r\n    };\r\n\r\n    fetchClients();\r\n    fetchFunds();\r\n  }, []);\r\n\r\n  const subscribe = async () => {\r\n    try {\r\n      const response = await axios.post('http://localhost:5000/subscribe', { client_id: clientId, fund_id: fundId, amount });\r\n      alert(`Suscripción exitosa: ${response.data.transaction_id}`);\r\n      setMessage('');\r\n      // Limpiar los campos del formulario\r\n      setClientId('');\r\n      setFundId('');\r\n      setAmount('');\r\n    } catch (error) {\r\n      if (error.response.status === 400) {\r\n        setMessage(error.response.data.message);\r\n        setClientExists(false);\r\n      } else {\r\n        alert(error.response.data.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleAmountChange = (e) => {\r\n    const value = e.target.value;\r\n    // Solo permitir números\r\n    if (/^\\d*$/.test(value)) {\r\n      setAmount(value);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <h2>Suscribirse a un Fondo</h2>\r\n      {message && <Alert variant=\"danger\">{message}</Alert>}\r\n      <Form>\r\n        <Form.Group>\r\n          <Form.Label>Cliente</Form.Label>\r\n          <Form.Control as=\"select\" value={clientId} onChange={(e) => setClientId(e.target.value)}>\r\n            <option value=\"\">Seleccione un cliente</option>\r\n            {clients.map((client) => (\r\n              <option key={client.ClienteId} value={client.ClienteId}>{client.Name}</option>\r\n            ))}\r\n          </Form.Control>\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Fondo</Form.Label>\r\n          <Form.Control as=\"select\" value={fundId} onChange={(e) => setFundId(e.target.value)}>\r\n            <option value=\"\">Seleccione un fondo</option>\r\n            {funds.map((fund) => (\r\n              <option key={fund.Id} value={fund.Id}>{fund.Nombre} - Monto Mínimo: {fund.MontoMinimo}</option>\r\n            ))}\r\n          </Form.Control>\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Amount</Form.Label>\r\n          <Form.Control type=\"text\" value={amount} onChange={handleAmountChange} />\r\n        </Form.Group>\r\n        <Button variant=\"primary\" onClick={subscribe}>Suscribirse</Button>\r\n      </Form>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SuscriptionForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}