{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Container,ListGroup,Button,Alert,Badge,Form}from'react-bootstrap';import log from'loglevel';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";log.setLevel('debug');const TransactionsList=()=>{const[transactions,setTransactions]=useState([]);const[filteredTransactions,setFilteredTransactions]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[message,setMessage]=useState('');useEffect(()=>{const fetchTransactions=async()=>{try{const response=await axios.get('http://localhost:5000/all_transactions');log.debug('Transactions data:',response.data);// Verifica la estructura de los datos aquí\nsetTransactions(response.data);setFilteredTransactions(response.data);}catch(error){log.error('Error fetching transactions:',error);}};fetchTransactions();},[]);const filterTransactions=clientId=>{log.debug('Filtering transactions for Client ID:',clientId);if(clientId.trim()===''){setFilteredTransactions(transactions);}else{const filtered=transactions.filter(txn=>txn.ClientID.includes(clientId));log.debug('Filtered Transactions:',filtered);setFilteredTransactions(filtered);}};const handleChange=e=>{const value=e.target.value;setSearchTerm(value);filterTransactions(value);};const deleteTransaction=async transactionId=>{try{await axios.delete(\"http://localhost:5000/transaction/\".concat(transactionId));const updatedTransactions=transactions.filter(txn=>txn.TransaccionId!==transactionId);setTransactions(updatedTransactions);setFilteredTransactions(updatedTransactions);setMessage('Transacción eliminada con éxito.');}catch(error){log.error('Error deleting transaction:',error);setMessage('Error eliminando la transacción.');}};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Transacciones \",/*#__PURE__*/_jsx(Badge,{variant:\"secondary\",children:filteredTransactions.length})]}),message&&/*#__PURE__*/_jsx(Alert,{variant:\"info\",children:message}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Buscar por Cliente ID\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Ingrese el Cliente ID\",value:searchTerm,onChange:handleChange})]}),/*#__PURE__*/_jsx(ListGroup,{children:filteredTransactions.map(txn=>/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Cliente ID:\"}),\" \",txn.ClientID,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Tipo:\"}),\" \",txn.Type,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Fondo ID:\"}),\" \",txn.FundID,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Monto:\"}),\" \",txn.Amount]}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:()=>deleteTransaction(txn.TransaccionId),style:{marginTop:'10px'},children:\"Eliminar Transacci\\xF3n\"})]},txn.TransaccionId))})]});};export default TransactionsList;","map":{"version":3,"names":["React","useState","useEffect","axios","Container","ListGroup","Button","Alert","Badge","Form","log","jsx","_jsx","jsxs","_jsxs","setLevel","TransactionsList","transactions","setTransactions","filteredTransactions","setFilteredTransactions","searchTerm","setSearchTerm","message","setMessage","fetchTransactions","response","get","debug","data","error","filterTransactions","clientId","trim","filtered","filter","txn","ClientID","includes","handleChange","e","value","target","deleteTransaction","transactionId","delete","concat","updatedTransactions","TransaccionId","children","variant","length","Group","Label","Control","type","placeholder","onChange","map","Item","Type","FundID","Amount","onClick","style","marginTop"],"sources":["C:/Users/guiog/Documents/amaris/fund_app/frontend/src/components/TransactionsList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Container, ListGroup, Button, Alert, Badge, Form } from 'react-bootstrap';\r\nimport log from 'loglevel';\r\n\r\nlog.setLevel('debug');\r\n\r\nconst TransactionsList = () => {\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [filteredTransactions, setFilteredTransactions] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchTransactions = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:5000/all_transactions');\r\n        log.debug('Transactions data:', response.data);  // Verifica la estructura de los datos aquí\r\n        setTransactions(response.data);\r\n        setFilteredTransactions(response.data);\r\n      } catch (error) {\r\n        log.error('Error fetching transactions:', error);\r\n      }\r\n    };\r\n\r\n    fetchTransactions();\r\n  }, []);\r\n\r\n  const filterTransactions = (clientId) => {\r\n    log.debug('Filtering transactions for Client ID:', clientId);\r\n    if (clientId.trim() === '') {\r\n      setFilteredTransactions(transactions);\r\n    } else {\r\n      const filtered = transactions.filter(txn => txn.ClientID.includes(clientId));\r\n      log.debug('Filtered Transactions:', filtered);\r\n      setFilteredTransactions(filtered);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const value = e.target.value;\r\n    setSearchTerm(value);\r\n    filterTransactions(value);\r\n  };\r\n\r\n  const deleteTransaction = async (transactionId) => {\r\n    try {\r\n      await axios.delete(`http://localhost:5000/transaction/${transactionId}`);\r\n      const updatedTransactions = transactions.filter(txn => txn.TransaccionId !== transactionId);\r\n      setTransactions(updatedTransactions);\r\n      setFilteredTransactions(updatedTransactions);\r\n      setMessage('Transacción eliminada con éxito.');\r\n    } catch (error) {\r\n      log.error('Error deleting transaction:', error);\r\n      setMessage('Error eliminando la transacción.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <h2>Transacciones <Badge variant=\"secondary\">{filteredTransactions.length}</Badge></h2>\r\n      {message && <Alert variant=\"info\">{message}</Alert>}\r\n      <Form.Group>\r\n        <Form.Label>Buscar por Cliente ID</Form.Label>\r\n        <Form.Control\r\n          type=\"text\"\r\n          placeholder=\"Ingrese el Cliente ID\"\r\n          value={searchTerm}\r\n          onChange={handleChange}\r\n        />\r\n      </Form.Group>\r\n      <ListGroup>\r\n        {filteredTransactions.map((txn) => (\r\n          <ListGroup.Item key={txn.TransaccionId}>\r\n            <div>\r\n              <strong>Cliente ID:</strong> {txn.ClientID} <br />\r\n              <strong>Tipo:</strong> {txn.Type} <br />\r\n              <strong>Fondo ID:</strong> {txn.FundID} <br />\r\n              <strong>Monto:</strong> {txn.Amount}\r\n            </div>\r\n            <Button\r\n              variant=\"danger\"\r\n              onClick={() => deleteTransaction(txn.TransaccionId)}\r\n              style={{ marginTop: '10px' }}\r\n            >\r\n              Eliminar Transacción\r\n            </Button>\r\n          </ListGroup.Item>\r\n        ))}\r\n      </ListGroup>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default TransactionsList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}